<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" type="text/css" href = "/css/join.css">
</head>
<body>
    <script defer src="/__/firebase/9.20.0/firebase-app-compat.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/9.20.0/firebase-auth-compat.js"></script>
    <script defer src="/__/firebase/9.20.0/firebase-database-compat.js"></script>
    <script defer src="/__/firebase/9.20.0/firebase-firestore-compat.js"></script>
    <script defer src="/__/firebase/9.20.0/firebase-storage-compat.js"></script>
    <script defer src="/__/firebase/9.20.0/firebase-analytics-compat.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
    

  
    <div id="header">
      <img src="../images/Daelim_logo.png" id="logo">
  </div>


  <!-- wrapper -->
  <div id="wrapper">
      <!-- content-->
      <div id="content">

          <!-- ID -->
          <div>
              <h3 class="join_title">
                  <label for="id">아이디</label>
              </h3>
              <span class="box int_id">
                  <input type="text" id="id" class="int" maxlength="20">
                  
              </span>
              <span class="error_next_box"></span>
          </div>

          <!-- PW1 -->
          <div>
              <h3 class="join_title"><label for="pswd1">비밀번호</label></h3>
              <span class="box int_pass">
                  <input type="text" id="pswd1" class="int" maxlength="20">
                  <span id="alertTxt">사용불가</span>
                  <img src="../images/m_icon_pass.png" id="pswd1_img1" class="pswdImg">
              </span>
              <span class="error_next_box"></span>
          </div>

          <!-- PW2 -->
          <div>
              <h3 class="join_title"><label for="pswd2">비밀번호 재확인</label></h3>
              <span class="box int_pass_check">
                  <input type="text" id="pswd2" class="int" maxlength="20">
                  <img src="../images/m_icon_check_disable.png" id="pswd2_img1" class="pswdImg">
              </span>
              <span class="error_next_box"></span>
          </div>

          <!-- NAME -->
          <div>
              <h3 class="join_title"><label for="name">이름</label></h3>
              <span class="box int_name">
                  <input type="text" id="name" class="int" maxlength="20">
              </span>
              <span class="error_next_box"></span>
          </div>

          <!-- BIRTH -->
          <div>
              <h3 class="join_title"><label for="yy">생년월일</label></h3>

              <div id="bir_wrap">
                  <!-- BIRTH_YY -->
                  <div id="bir_yy">
                      <span class="box">
                          <input type="text" id="yy" class="int" maxlength="4" placeholder="년(4자)">
                      </span>
                  </div>

                  <!-- BIRTH_MM -->
                  <div id="bir_mm">
                      <span class="box">
                          <select id="mm" class="sel">
                              <option>월</option>
                              <option value="01">1</option>
                              <option value="02">2</option>
                              <option value="03">3</option>
                              <option value="04">4</option>
                              <option value="05">5</option>
                              <option value="06">6</option>
                              <option value="07">7</option>
                              <option value="08">8</option>
                              <option value="09">9</option>                                    
                              <option value="10">10</option>
                              <option value="11">11</option>
                              <option value="12">12</option>
                          </select>
                      </span>
                  </div>

                  <!-- BIRTH_DD -->
                  <div id="bir_dd">
                      <span class="box">
                          <input type="text" id="dd" class="int" maxlength="2" placeholder="일">
                      </span>
                  </div>

              </div>
              <span class="error_next_box"></span>    
          </div>

          <!-- GENDER -->
          <div>
              <h3 class="join_title"><label for="gender">성별</label></h3>
              <span class="box gender_code">
                  <select id="gender" class="sel">
                      <option>성별</option>
                      <option value="남자">남자</option>
                      <option value="여자">여자</option>
                  </select>                            
              </span>
              <span class="error_next_box">필수 정보입니다.</span>
          </div>

          <!-- EMAIL -->
          <div>
              <h3 class="join_title"><label for="email">본인확인 이메일<span class="optional">(선택)</span></label></h3>
              <span class="box int_email">
                  <input type="text" id="email" class="int" maxlength="100" placeholder="선택입력">
              </span>
              <span class="error_next_box">이메일 주소를 다시 확인해주세요.</span>    
          </div>

          <!-- MOBILE -->
          <div>
              <h3 class="join_title"><label for="phoneNo">휴대전화</label></h3>
              <span class="box int_mobile">
                  <input type="tel" id="mobile" class="int" maxlength="16" placeholder="전화번호 입력">
              </span>
              <span class="error_next_box"></span>    
          </div>

          <!-- STUDENTNO -->
          <div>
              <h3 class="join_title"><label for="studentNo">학번</label></h3>
              <span class="box int_studentNo">
                  <input type="text" id="studentNo" class="int" maxlength="9">
              </span>
              <span class="error_next_box"></span>
          </div>

          <!-- MAJOR -->
          <div>
              <h3 class="join_title"><label for="major">전공</label></h3>
              <span class="box major_code">
                  <select id="major" class="sel">
                      <option>전공 선택</option>
                      <option value="ai">AI시스템과</option>
                      <option value="robot">로봇자동화공학과</option>
                      <option value="architectural">건축과</option>
                      <option value="mechanic">기계공학과</option>
                      <option value="car">미래자동차공학부</option>
                      <option value="broadcast">방송음향영상학부</option>
                      <option value="industry">산업경영과</option>
                      <option value="fireSafety">소방안전설비과</option>
                      <option value="electronicCommunication">전자·통신과</option>
                      <option value="smartFactory">스마트팩토리학부</option>
                      <option value="design">실내디자인학부</option>
                      <option value="medical">의공융합과</option>
                      <option value="electronic">전기공학과</option>
                      <option value="computer">컴퓨터정보학부</option>
                      <option value="construction">건설환경공학과</option>
                      <option value="semiconductor">반도체학과</option>
                      <option value="business">경영학과</option>
                      <option value="media">도서관미디어정보과</option>
                      <option value="office">사무행정학과</option>
                      <option value="social">사회복지학과</option>
                      <option value="childEducation">유아교육과</option>
                      <option value="air">항공서비스과</option>
                      <option value="hotelLeisure">호텔레저학과</option>
                      <option value="childCare">아동보육과</option>
                      <option value="sport">스포츠학부</option>
                      <option value="hotelCook">호텔조리·제과학부</option>
                      <option value="healthSafety">보건안전학과</option>
                      <option value="biomedical">보건의료공학과</option>
                      <option value="medicalAdministration">보건의료행정과</option>
                      <option value="speech">언어치료학과</option>
                      <option value="navy">해군기술부사관과</option>
                  </select>                            
              </span>
              <span class="error_next_box"></span>
          </div>

          <!-- PHOTO -->
          <div>
              <h3 class="join_title"><label for="photo">본인 사진 첨부</label></h3>
              <span class="box int_photo">
                  <input type="file" id="photo" multiple>
              </span>
              <span class="error_next_box"></span>
          </div>

          <!-- JOIN BTN-->
          <div class="btn_area">
              <button type="button" id="btnJoin">
                  <span>가 입 하 기</span>
              </button>
          </div>

          

      </div> 
      <!-- content-->

  </div> 

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.20.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.20.0/firebase-analytics.js";
 
 // TODO: Replace the following with your app's Firebase project configuration
 // See: https://support.google.com/firebase/answer/7015592
  const firebaseConfig = {
    apiKey: "AIzaSyC_2wWtpqS7RK2Syi-TpRf6Nvwgzy4pgyk",
    authDomain: "capston-23.firebaseapp.com",
    databaseURL: "https://capston-23-default-rtdb.firebaseio.com",
    projectId: "capston-23",
    storageBucket: "capston-23.appspot.com",
    messagingSenderId: "838183596523",
    appId: "1:838183596523:web:a4766e64177014acd069ae",
    measurementId: "G-GJ34C4QJLQ"
  };

import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.20.0/firebase-auth.js";

document.getElementById('btnJoin').addEventListener('click', (event) => { 
    event.preventDefault()
    const email = document.getElementById('id').value
    const password = document.getElementById('pswd1').value
    const passwordConfirm = document.getElementById('pswd2').value
    const auth = getAuth();
    if(password != passwordConfirm) {
        alert("비밀번호가 다릅니다.")
    } else {
        createUserWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {
            console.log(userCredential)
            // Signed in
            const user = userCredential.user;
            // ...
        })
        .catch((error) => {
            console.log('error')
        const errorCode = error.code;
        const errorMessage = error.message;
        // ..
    });
    //writeUserData('user123', 'password123', 'user123@gmail.com');
}
})

 
 // Initialize Firebase
 firebase.initializeApp(firebaseConfig);
 const app = initializeApp(firebaseConfig);
 const analytics = getAnalytics(app);
 
 
 // Initialize Cloud Firestore and get a reference to the service
 
       const db = firebase.firestore();
        
        const id = document.querySelector('#id');

        var pw1 = document.querySelector('#pswd1');

        var pw2 = document.querySelector('#pswd2');
        var userName = document.querySelector('#name');

        var yy = document.querySelector('#yy');
        var mm = document.querySelector('#mm');
        var dd = document.querySelector('#dd');

        var gender = document.querySelector('#gender');

        var email = document.querySelector('#email');

        var mobile = document.querySelector('#mobile');

        var studentNo = document.querySelector('#studentNo');

        var major = document.querySelector('#major');

        var photo = document.querySelector('#photo');

        var error = document.querySelectorAll('.error_next_box');

        const submitButton = document.querySelector("#btnJoin")
        
        submitButton.addEventListener("click",()=>{
          db.collection('user').add({
          id: id.value,
          pw: pw1.value,
          userName: userName.value,
          year: yy.value,
          month: mm.value,
          day: dd.value,
          gender: gender.value,
          email: email.value,
          mobile: mobile.value,
          studentNo: studentNo.value,
          major: major.value
          })
         })
 </script>

</body>
</html>